port: 8888
socks-port: 8889
mixed-port: 8899
allow-lan: true
mode: Rule
log-level: info
external-controller: 0.0.0.0:6170
external-ui: "/usr/share/yacd"
experimental:
  ignore-resolve-fail: true
tun:
  enable: true
  stack: system
  auto-route: true
  auto-detect-interface: true
dns:
  enable: true
  # ipv6: false
  listen: 127.0.0.1:7874
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  default-nameserver:
    - 119.29.29.29
    - 223.5.5.5
    - 223.6.6.6
    - 1.2.4.8
    - 192.168.0.1
  nameserver:
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
  fake-ip-filter:
    - "*.lan"
    - "*.localdomain"
    - "*.example"
    - "*.invalid"
    - "*.localhost"
    - "*.test"
    - "*.local"
    - "*.home.arpa"
    - "time.*.com"
    - "time.*.gov"
    - "time.*.edu.cn"
    - "time.*.apple.com"
    - "time1.*.com"
    - "time2.*.com"
    - "time3.*.com"
    - "time4.*.com"
    - "time5.*.com"
    - "time6.*.com"
    - "time7.*.com"
    - "ntp.*.com"
    - "ntp1.*.com"
    - "ntp2.*.com"
    - "ntp3.*.com"
    - "ntp4.*.com"
    - "ntp5.*.com"
    - "ntp6.*.com"
    - "ntp7.*.com"
    - "*.time.edu.cn"
    - "*.ntp.org.cn"
    - "+.pool.ntp.org"
    - "time1.cloud.tencent.com"
    - "music.163.com"
    - "*.music.163.com"
    - "*.126.net"
    - "musicapi.taihe.com"
    - "music.taihe.com"
    - "songsearch.kugou.com"
    - "trackercdn.kugou.com"
    - "*.kuwo.cn"
    - "api-jooxtt.sanook.com"
    - "api.joox.com"
    - "joox.com"
    - "y.qq.com"
    - "*.y.qq.com"
    - "streamoc.music.tc.qq.com"
    - "mobileoc.music.tc.qq.com"
    - "isure.stream.qqmusic.qq.com"
    - "dl.stream.qqmusic.qq.com"
    - "aqqmusic.tc.qq.com"
    - "amobile.music.tc.qq.com"
    - "*.xiami.com"
    - "*.music.migu.cn"
    - "music.migu.cn"
    - "*.msftconnecttest.com"
    - "*.msftncsi.com"
    - "msftconnecttest.com"
    - "msftncsi.com"
    - "localhost.ptlogin2.qq.com"
    - "localhost.sec.qq.com"
    - "+.srv.nintendo.net"
    - "+.stun.playstation.net"
    - "xbox.*.microsoft.com"
    - "xnotify.xboxlive.com"
    - "+.battlenet.com.cn"
    - "+.wotgame.cn"
    - "+.wggames.cn"
    - "+.wowsgame.cn"
    - "+.wargaming.net"
    - "proxy.golang.org"
    - "stun.*.*"
    - "stun.*.*.*"
    - "+.stun.*.*"
    - "+.stun.*.*.*"
    - "+.stun.*.*.*.*"
    - "heartbeat.belkin.com"
    - "*.linksys.com"
    - "*.linksyssmartwifi.com"
    - "*.router.asus.com"
    - "mesu.apple.com"
    - "swscan.apple.com"
    - "swquery.apple.com"
    - "swdownload.apple.com"
    - "swcdn.apple.com"
    - "swdist.apple.com"
    - "lens.l.google.com"
    - "stun.l.google.com"
    - "+.nflxvideo.net"
    - "*.square-enix.com"
    - "*.finalfantasyxiv.com"
    - "*.ffxiv.com"
clash-for-android: 
  # append-system-dns: true # è¿½åŠ ç³»ç»Ÿ DNS åˆ° nameserver 
  ui-subtitle-pattern: "[\u4e00-\u9fa5]{2,4}"

proxy-providers:
    trojan:
      type: http
      path: "./proxy_provider/trojan.yaml"
      url: https://clashaddons.pages.dev/proxies/clash/trojan
      interval: 3600
      health-check:
        enable: true
        url: http://www.gstatic.com/generate_204
        interval: 300
    ss-sip002:
      type: http
      path: "./proxy_provider/ss-sip002.yaml"
      url: https://clashaddons.pages.dev/proxies/clash/ss-sip002
      interval: 3600
      health-check:
        enable: true
        url: http://www.gstatic.com/generate_204
        interval: 300
    vmess:
      type: http
      path: "./proxy_provider/vmess.yaml"
      url: https://clashaddons.pages.dev/proxies/clash/vmess
      interval: 3600
      health-check:
        enable: true
        url: http://www.gstatic.com/generate_204
        interval: 300
    ssr:
      type: http
      path: "./proxy_provider/ssr.yaml"
      url: https://clashaddons.pages.dev/proxies/clash/ssr
      interval: 3600
      health-check:
        enable: true
        url: http://www.gstatic.com/generate_204
        interval: 300
    ğŸ‡ºğŸ‡¦:
      type: http
      path: "./proxy_provider/ğŸ‡ºğŸ‡¦.yaml"
      url: https://clashaddons.pages.dev/proxies/clash/region/ğŸ‡ºğŸ‡¦
      interval: 3600
      health-check:
        enable: true
        url: http://www.gstatic.com/generate_204
        interval: 300
    ğŸ‡¯ğŸ‡µ:
      type: http
      path: "./proxy_provider/ğŸ‡¯ğŸ‡µ.yaml"
      url: https://clashaddons.pages.dev/proxies/clash/region/ğŸ‡¯ğŸ‡µ
      interval: 3600
      health-check:
        enable: true
        url: http://www.gstatic.com/generate_204
        interval: 300
    ğŸ‡¨ğŸ‡¦:
      type: http
      path: "./proxy_provider/ğŸ‡¨ğŸ‡¦.yaml"
      url: https://clashaddons.pages.dev/proxies/clash/region/ğŸ‡¨ğŸ‡¦
      interval: 3600
      health-check:
        enable: true
        url: http://www.gstatic.com/generate_204
        interval: 300
    ğŸ‡¸ğŸ‡¬:
      type: http
      path: "./proxy_provider/ğŸ‡¸ğŸ‡¬.yaml"
      url: https://clashaddons.pages.dev/proxies/clash/region/ğŸ‡¸ğŸ‡¬
      interval: 3600
      health-check:
        enable: true
        url: http://www.gstatic.com/generate_204
        interval: 300
    ğŸ‡²ğŸ‡¾:
      type: http
      path: "./proxy_provider/ğŸ‡²ğŸ‡¾.yaml"
      url: https://clashaddons.pages.dev/proxies/clash/region/ğŸ‡²ğŸ‡¾
      interval: 3600
      health-check:
        enable: true
        url: http://www.gstatic.com/generate_204
        interval: 300
    ğŸ‡¬ğŸ‡§:
      type: http
      path: "./proxy_provider/ğŸ‡¬ğŸ‡§.yaml"
      url: https://clashaddons.pages.dev/proxies/clash/region/ğŸ‡¬ğŸ‡§
      interval: 3600
      health-check:
        enable: true
        url: http://www.gstatic.com/generate_204
        interval: 300
    ğŸ‡¦ğŸ‡º:
      type: http
      path: "./proxy_provider/ğŸ‡¦ğŸ‡º.yaml"
      url: https://clashaddons.pages.dev/proxies/clash/region/ğŸ‡¦ğŸ‡º
      interval: 3600
      health-check:
        enable: true
        url: http://www.gstatic.com/generate_204
        interval: 300
    ğŸ‡«ğŸ‡·:
      type: http
      path: "./proxy_provider/ğŸ‡«ğŸ‡·.yaml"
      url: https://clashaddons.pages.dev/proxies/clash/region/ğŸ‡«ğŸ‡·
      interval: 3600
      health-check:
        enable: true
        url: http://www.gstatic.com/generate_204
        interval: 300
    ğŸ‡°ğŸ‡·:
      type: http
      path: "./proxy_provider/ğŸ‡°ğŸ‡·.yaml"
      url: https://clashaddons.pages.dev/proxies/clash/region/ğŸ‡°ğŸ‡·
      interval: 3600
      health-check:
        enable: true
        url: http://www.gstatic.com/generate_204
        interval: 300
    ğŸ‡©ğŸ‡ª:
      type: http
      path: "./proxy_provider/ğŸ‡©ğŸ‡ª.yaml"
      url: https://clashaddons.pages.dev/proxies/clash/region/ğŸ‡©ğŸ‡ª
      interval: 3600
      health-check:
        enable: true
        url: http://www.gstatic.com/generate_204
        interval: 300
    ğŸ‡ºğŸ‡¸:
      type: http
      path: "./proxy_provider/ğŸ‡ºğŸ‡¸.yaml"
      url: https://clashaddons.pages.dev/proxies/clash/region/ğŸ‡ºğŸ‡¸
      interval: 3600
      health-check:
        enable: true
        url: http://www.gstatic.com/generate_204
        interval: 300
    ğŸ‡³ğŸ‡±:
      type: http
      path: "./proxy_provider/ğŸ‡³ğŸ‡±.yaml"
      url: https://clashaddons.pages.dev/proxies/clash/region/ğŸ‡³ğŸ‡±
      interval: 3600
      health-check:
        enable: true
        url: http://www.gstatic.com/generate_204
        interval: 300
    ğŸ‡­ğŸ‡°:
      type: http
      path: "./proxy_provider/ğŸ‡­ğŸ‡°.yaml"
      url: https://clashaddons.pages.dev/proxies/clash/region/ğŸ‡­ğŸ‡°
      interval: 3600
      health-check:
        enable: true
        url: http://www.gstatic.com/generate_204
        interval: 300
    ğŸ‡¹ğŸ‡¼:
      type: http
      path: "./proxy_provider/ğŸ‡¹ğŸ‡¼.yaml"
      url: https://clashaddons.pages.dev/proxies/clash/region/ğŸ‡¹ğŸ‡¼
      interval: 3600
      health-check:
        enable: true
        url: http://www.gstatic.com/generate_204
        interval: 300
    ğŸ‡¨ğŸ‡³:
      type: http
      path: "./proxy_provider/ğŸ‡¨ğŸ‡³.yaml"
      url: https://clashaddons.pages.dev/proxies/clash/region/ğŸ‡¨ğŸ‡³
      interval: 3600
      health-check:
        enable: true
        url: http://www.gstatic.com/generate_204
        interval: 300

proxy-groups:
- name: All
  type: url-test
  proxies:
  - ğŸ‡ºğŸ‡¦
  - ğŸ‡¯ğŸ‡µ
  - ğŸ‡¨ğŸ‡¦
  - ğŸ‡¸ğŸ‡¬
  - ğŸ‡²ğŸ‡¾
  - ğŸ‡¬ğŸ‡§
  - ğŸ‡¦ğŸ‡º
  - ğŸ‡«ğŸ‡·
  - ğŸ‡°ğŸ‡·
  - ğŸ‡©ğŸ‡ª
  - ğŸ‡ºğŸ‡¸
  - ğŸ‡³ğŸ‡±
  - ğŸ‡­ğŸ‡°
  - ğŸ‡¹ğŸ‡¼

  
  
  url: http://www.gstatic.com/generate_204
  interval: 300
  tolerance: 180

- name: Advertising
  type: select
  proxies:
  - REJECT
  - DIRECT
  - Proxy
  
  
- name: Domestic
  type: select
  proxies:
  - DIRECT
  - Proxy
  - trojan
  - ss-sip002
  - vmess
  - ssr
  - ğŸ‡ºğŸ‡¦
  - ğŸ‡¯ğŸ‡µ
  - ğŸ‡¨ğŸ‡¦
  - ğŸ‡¸ğŸ‡¬
  - ğŸ‡²ğŸ‡¾
  - ğŸ‡¬ğŸ‡§
  - ğŸ‡¦ğŸ‡º
  - ğŸ‡«ğŸ‡·
  - ğŸ‡°ğŸ‡·
  - ğŸ‡©ğŸ‡ª
  - ğŸ‡ºğŸ‡¸
  - ğŸ‡³ğŸ‡±
  - ğŸ‡­ğŸ‡°
  - ğŸ‡¹ğŸ‡¼
  - ğŸ‡¨ğŸ‡³

  
  
- name: Hijacking
  type: select
  proxies:
  - REJECT
  - DIRECT
  - Proxy
  
  
- name: Others
  type: select
  proxies:
  - Proxy
  - trojan
  - ss-sip002
  - vmess
  - ssr
  - ğŸ‡ºğŸ‡¦
  - ğŸ‡¯ğŸ‡µ
  - ğŸ‡¨ğŸ‡¦
  - ğŸ‡¸ğŸ‡¬
  - ğŸ‡²ğŸ‡¾
  - ğŸ‡¬ğŸ‡§
  - ğŸ‡¦ğŸ‡º
  - ğŸ‡«ğŸ‡·
  - ğŸ‡°ğŸ‡·
  - ğŸ‡©ğŸ‡ª
  - ğŸ‡ºğŸ‡¸
  - ğŸ‡³ğŸ‡±
  - ğŸ‡­ğŸ‡°
  - ğŸ‡¹ğŸ‡¼
  - ğŸ‡¨ğŸ‡³

  - DIRECT
  
  
- name: Privacy
  type: select
  proxies:
  - REJECT
  - DIRECT
  - Proxy
  
  
- name: Proxy
  type: select
  proxies:
  - All
  - trojan
  - ss-sip002
  - vmess
  - ssr
  - ğŸ‡ºğŸ‡¦
  - ğŸ‡¯ğŸ‡µ
  - ğŸ‡¨ğŸ‡¦
  - ğŸ‡¸ğŸ‡¬
  - ğŸ‡²ğŸ‡¾
  - ğŸ‡¬ğŸ‡§
  - ğŸ‡¦ğŸ‡º
  - ğŸ‡«ğŸ‡·
  - ğŸ‡°ğŸ‡·
  - ğŸ‡©ğŸ‡ª
  - ğŸ‡ºğŸ‡¸
  - ğŸ‡³ğŸ‡±
  - ğŸ‡­ğŸ‡°
  - ğŸ‡¹ğŸ‡¼
  - ğŸ‡¨ğŸ‡³

  - DIRECT
  
  
- name: Streaming
  type: select
  proxies:
  - Proxy
  - trojan
  - ss-sip002
  - vmess
  - ssr
  - ğŸ‡ºğŸ‡¦
  - ğŸ‡¯ğŸ‡µ
  - ğŸ‡¨ğŸ‡¦
  - ğŸ‡¸ğŸ‡¬
  - ğŸ‡²ğŸ‡¾
  - ğŸ‡¬ğŸ‡§
  - ğŸ‡¦ğŸ‡º
  - ğŸ‡«ğŸ‡·
  - ğŸ‡°ğŸ‡·
  - ğŸ‡©ğŸ‡ª
  - ğŸ‡ºğŸ‡¸
  - ğŸ‡³ğŸ‡±
  - ğŸ‡­ğŸ‡°
  - ğŸ‡¹ğŸ‡¼
  - ğŸ‡¨ğŸ‡³

  - DIRECT
  
  
- name: StreamingSE
  type: select
  proxies:
  - DIRECT
  - Proxy
  - trojan
  - ss-sip002
  - vmess
  - ssr
  - ğŸ‡ºğŸ‡¦
  - ğŸ‡¯ğŸ‡µ
  - ğŸ‡¨ğŸ‡¦
  - ğŸ‡¸ğŸ‡¬
  - ğŸ‡²ğŸ‡¾
  - ğŸ‡¬ğŸ‡§
  - ğŸ‡¦ğŸ‡º
  - ğŸ‡«ğŸ‡·
  - ğŸ‡°ğŸ‡·
  - ğŸ‡©ğŸ‡ª
  - ğŸ‡ºğŸ‡¸
  - ğŸ‡³ğŸ‡±
  - ğŸ‡­ğŸ‡°
  - ğŸ‡¹ğŸ‡¼
  - ğŸ‡¨ğŸ‡³

  
  

- name: trojan
  type: url-test
  
  use:
  - trojan
  
  url: http://www.gstatic.com/generate_204
  interval: 300
  tolerance: 180

- name: ss-sip002
  type: url-test
  
  use:
  - ss-sip002
  
  url: http://www.gstatic.com/generate_204
  interval: 300
  tolerance: 180

- name: vmess
  type: url-test
  
  use:
  - vmess
  
  url: http://www.gstatic.com/generate_204
  interval: 300
  tolerance: 180

- name: ssr
  type: url-test
  
  use:
  - ssr
  
  url: http://www.gstatic.com/generate_204
  interval: 300
  tolerance: 180

- name: ğŸ‡ºğŸ‡¦
  type: url-test
  
  use:
  - ğŸ‡ºğŸ‡¦
  
  url: http://www.gstatic.com/generate_204
  interval: 300
  tolerance: 180

- name: ğŸ‡¯ğŸ‡µ
  type: url-test
  
  use:
  - ğŸ‡¯ğŸ‡µ
  
  url: http://www.gstatic.com/generate_204
  interval: 300
  tolerance: 180

- name: ğŸ‡¨ğŸ‡¦
  type: url-test
  
  use:
  - ğŸ‡¨ğŸ‡¦
  
  url: http://www.gstatic.com/generate_204
  interval: 300
  tolerance: 180

- name: ğŸ‡¸ğŸ‡¬
  type: url-test
  
  use:
  - ğŸ‡¸ğŸ‡¬
  
  url: http://www.gstatic.com/generate_204
  interval: 300
  tolerance: 180

- name: ğŸ‡²ğŸ‡¾
  type: url-test
  
  use:
  - ğŸ‡²ğŸ‡¾
  
  url: http://www.gstatic.com/generate_204
  interval: 300
  tolerance: 180

- name: ğŸ‡¬ğŸ‡§
  type: url-test
  
  use:
  - ğŸ‡¬ğŸ‡§
  
  url: http://www.gstatic.com/generate_204
  interval: 300
  tolerance: 180

- name: ğŸ‡¦ğŸ‡º
  type: url-test
  
  use:
  - ğŸ‡¦ğŸ‡º
  
  url: http://www.gstatic.com/generate_204
  interval: 300
  tolerance: 180

- name: ğŸ‡«ğŸ‡·
  type: url-test
  
  use:
  - ğŸ‡«ğŸ‡·
  
  url: http://www.gstatic.com/generate_204
  interval: 300
  tolerance: 180

- name: ğŸ‡°ğŸ‡·
  type: url-test
  
  use:
  - ğŸ‡°ğŸ‡·
  
  url: http://www.gstatic.com/generate_204
  interval: 300
  tolerance: 180

- name: ğŸ‡©ğŸ‡ª
  type: url-test
  
  use:
  - ğŸ‡©ğŸ‡ª
  
  url: http://www.gstatic.com/generate_204
  interval: 300
  tolerance: 180

- name: ğŸ‡ºğŸ‡¸
  type: url-test
  
  use:
  - ğŸ‡ºğŸ‡¸
  
  url: http://www.gstatic.com/generate_204
  interval: 300
  tolerance: 180

- name: ğŸ‡³ğŸ‡±
  type: url-test
  
  use:
  - ğŸ‡³ğŸ‡±
  
  url: http://www.gstatic.com/generate_204
  interval: 300
  tolerance: 180

- name: ğŸ‡­ğŸ‡°
  type: url-test
  
  use:
  - ğŸ‡­ğŸ‡°
  
  url: http://www.gstatic.com/generate_204
  interval: 300
  tolerance: 180

- name: ğŸ‡¹ğŸ‡¼
  type: url-test
  
  use:
  - ğŸ‡¹ğŸ‡¼
  
  url: http://www.gstatic.com/generate_204
  interval: 300
  tolerance: 180

- name: ğŸ‡¨ğŸ‡³
  type: url-test
  
  use:
  - ğŸ‡¨ğŸ‡³
  
  url: http://www.gstatic.com/generate_204
  interval: 300
  tolerance: 180



script:
  shortcuts:
    common_port: dst_port not in [21, 22, 23, 53, 80, 123, 143, 194, 443, 465, 587,
      853, 993, 995, 998, 2052, 2053, 2082, 2083, 2086, 2095, 2096, 5222, 5228, 5229,
      5230, 8080, 8443, 8880, 8888, 8889] and network == 'tcp'
  code: |
    def main(ctx, metadata):
        directkeywordlist = ["baidu"]
        for directkeyword in directkeywordlist:
          if directkeyword in metadata["host"]:
            ctx.log('[Script] matched keyword %s use direct' % directkeyword)
            return "DIRECT"


rule-providers:
  Unbreak:
    type: http
    behavior: classical
    path: "./RuleSet/Unbreak.yaml"
    url: https://clashaddons.pages.dev/proxies/rules/clash/RuleSet/Unbreak.yaml
    interval: 86400
  Advertising:
    type: http
    behavior: classical
    path: "./RuleSet/Advertising.yaml"
    url: https://clashaddons.pages.dev/proxies/rules/clash/RuleSet/Advertising.yaml
    interval: 86400
  Hijacking:
    type: http
    behavior: classical
    path: "./RuleSet/Hijacking.yaml"
    url: https://clashaddons.pages.dev/proxies/rules/clash/RuleSet/Hijacking.yaml
    interval: 86400
  Privacy:
    type: http
    behavior: classical
    path: "./RuleSet/Privacy.yaml"
    url: https://clashaddons.pages.dev/proxies/rules/clash/RuleSet/Privacy.yaml
    interval: 86400
  Streaming:
    type: http
    behavior: classical
    path: "./RuleSet/StreamingMedia/Streaming.yaml"
    url: https://clashaddons.pages.dev/proxies/rules/clash/RuleSet/StreamingMedia/Streaming.yaml
    interval: 86400
  StreamingSE:
    type: http
    behavior: classical
    path: "./RuleSet/StreamingMedia/StreamingSE.yaml"
    url: https://clashaddons.pages.dev/proxies/rules/clash/RuleSet/StreamingMedia/StreamingSE.yaml
    interval: 86400
  Global:
    type: http
    behavior: classical
    path: "./RuleSet/Global.yaml"
    url: https://clashaddons.pages.dev/proxies/rules/clash/RuleSet/Global.yaml
    interval: 86400
  China:
    type: http
    behavior: classical
    path: "./RuleSet/China.yaml"
    url: https://clashaddons.pages.dev/proxies/rules/clash/RuleSet/China.yaml
    interval: 86400
  ChinaIP:
    type: http
    behavior: ipcidr
    path: "./RuleSet/Extra/ChinaIP.yaml"
    url: https://clashaddons.pages.dev/proxies/rules/clash/RuleSet/Extra/ChinaIP.yaml
    interval: 86400
rules:
- RULE-SET,Unbreak,DIRECT
- RULE-SET,Advertising,Advertising
- RULE-SET,Hijacking,Hijacking
- RULE-SET,Privacy,Privacy
- RULE-SET,Streaming,Streaming
- RULE-SET,StreamingSE,StreamingSE
- RULE-SET,Global,Proxy
- RULE-SET,China,Domestic
- IP-CIDR,192.168.0.0/16,DIRECT
- IP-CIDR,10.0.0.0/8,DIRECT
- IP-CIDR,172.16.0.0/12,DIRECT
- IP-CIDR,127.0.0.0/8,DIRECT
- IP-CIDR,100.64.0.0/10,DIRECT
- IP-CIDR,224.0.0.0/4,DIRECT
- IP-CIDR,fe80::/10,DIRECT
- RULE-SET,ChinaIP,Domestic
- IP-CIDR,119.28.28.28/32,DIRECT
- IP-CIDR,182.254.116.0/24,DIRECT

- DOMAIN-KEYWORD,crunchyroll,Streaming
- SCRIPT,common_port,DIRECT
- MATCH,Others